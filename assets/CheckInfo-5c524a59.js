import{_ as L,L as N,m as v,d as y,r as d,o as g,c as b,e,F as W,i as D,t as r,j as x,J as k,I as E,f as i,w as C,g as a,a as U,H as f}from"./index-45ccec52.js";import{C as V}from"./CartStore-62cb02a5.js";import{S as _}from"./sweetalert2.all-ba9e78cd.js";import{O as w}from"./order-service-eb50fb44.js";import{L as S}from"./LoadingStore-1bc84e62.js";const J={components:{Loading:N},data(){return{user:{},message:"",couponCode:"prefect666"}},methods:{...v(S,["toggleLoading"]),...v(V,["getCart"]),useCoupon(){this.toggleLoading(),w.useCoupon(this.couponCode).then(s=>{this.toggleLoading(),s.isSuccess?(this.getCart(),_.fire({toast:!0,title:"已使用折價券！",icon:"success",timer:2e3,position:"top-end",showConfirmButton:!1})):_.fire({title:s.msg,icon:"error"})})},isPhone(s){return/^(09)[0-9]{8}$/.test(s)?!0:"請輸入 09 開頭的 10 位電話號碼"},onSubmit(s,{resetForm:o}){const h={user:{...this.user},message:this.message};this.toggleLoading(),w.orderSubmit(h).then(c=>{this.toggleLoading(),c.isSuccess?(o(),this.message="",this.getCart(),this.$router.push(`/orderConfirm/${c.order.orderId}`)):_.fire({title:c.msg,icon:"error"})})}},computed:{...y(V,["carts"]),...y(S,["isLoading"])}},P={class:"bg-homeSection"},Z={class:"bg-prds bg-white"},T=e("div",{class:"bg-prdBanner position-relative",style:{"background-image":"url('https://storage.googleapis.com/vue-course-api.appspot.com/lina-vueapi/1677852996621.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=WNOBLbEn%2B4HFspBIWLRXuJ6pxbN%2B3ijsN7Tn3ac5rK9j1iMrd21A0VrstKPZhlGdWGjscnrSJTlqJPkCJ%2FCDWL87%2BjBecMHbEgfZzvhI0OoTnz3m5pQB6kWWacJC0C03Fby%2FtZDOvZGyg4rnsWPW0hQzRTPE5COpDG8HIqaFufRUaVHS5bEBvXuEfGYNAzN3W6tphbsBTuFwFgCVwNDmKvJ9TP%2FM9XVRZSflFto45njpC8Zi4r%2B2pZuUyZyncbDcmy5XqKmbRbc72DJnB881%2FMj2G9KLeWPDih%2BEUiOJXmXfkpSFsTWPEQYWPX%2F5JtmaIZ9HW2Nx32ls%2FmlpZksqlQ%3D%3D')"}},[e("div",{class:"banner-cta bg-white-opacity position-absolute"},[e("div",{class:"d-inline-block"},[e("h2",{class:"font-banner text-primary-dark"},[a(" 立即訂購"),e("br"),a("重啟年輕煥光肌 ")])])])],-1),q={class:"container bg-white py-5 py-lg-7"},I=U('<div class="row justify-content-center"><div class="col-lg-8"><ul class="cartlist list-unstyled d-flex justify-content-between mx-auto w-75 mb-5 mb-lg-7"><li class="position-relative border-2 border-primary-dark rounded-circle circle d-flex justify-content-center align-items-center text-primary-dark bg-primary mb-0"> 1 </li><li class="position-relative border-2 border-primary-dark rounded-circle circle d-flex justify-content-center align-items-center text-white bg-primary-dark mb-0"> 2 </li><li class="position-relative border-2 border-primary-dark rounded-circle circle d-flex justify-content-center align-items-center text-primary-dark bg-primary mb-0"> 3 </li><li class="position-relative border-2 border-primary-dark rounded-circle circle d-flex justify-content-center align-items-center text-primary-dark bg-primary mb-0"> 4 </li></ul></div></div>',1),M={class:"row gx-4 gx-lg-5"},z={class:"col-lg-6"},G={class:"table"},O=e("thead",{class:"text-center"},[e("tr",null,[e("th",null,"品名"),e("th",null,"單價"),e("th",null,"數量/單位"),e("th",null,"小計")])],-1),X={class:"align-middle"},H={class:"d-flex align-items-center"},K={class:"ratio ratio-1x1 w-50 me-2"},R=["src","alt"],A={class:"text-end"},Q={class:"text-center"},Y={class:"text-end"},$={class:"d-flex justify-content-between px-2"},ee=e("p",null,"小計：",-1),se={class:"input-group mb-3"},te={key:0,class:"d-flex justify-content-between px-2"},oe=e("p",null,"折價券折扣：",-1),le={class:"d-flex justify-content-between px-2"},ie=e("p",null,"總計：",-1),ne={class:"col-lg-6 mt-5 mt-lg-0"},re={class:"mb-3"},ae=e("div",{class:"text-end"},[e("span",{class:"text-danger"},"*"),a("為必填 ")],-1),de=e("label",{for:"email"},[a(" 姓名"),e("span",{class:"text-danger"},"*")],-1),ce={class:"mb-3"},me=e("label",{for:"email"},[a(" Email"),e("span",{class:"text-danger"},"*")],-1),ue={class:"mb-3"},pe=e("label",{for:"email"},[a(" 電話"),e("span",{class:"text-danger"},"*")],-1),ge={class:"mb-3"},be=e("label",{for:"address"},[a(" 地址"),e("span",{class:"text-danger"},"*")],-1),fe={class:"mb-3"},_e=e("label",{for:"message",class:"form-label"},"留言",-1),he=e("button",{type:"submit",class:"btn btn-primary w-100"}," 送出訂單 ",-1);function ve(s,o,h,c,l,m){const F=d("router-link"),u=d("VField"),p=d("error-message"),j=d("VForm"),B=d("loading");return g(),b("main",P,[e("section",Z,[T,e("div",q,[I,e("div",M,[e("div",z,[e("table",G,[O,e("tbody",X,[(g(!0),b(W,null,D(s.carts.carts,t=>(g(),b("tr",{key:t},[e("td",H,[e("div",K,[e("img",{src:t.product.imageUrl,alt:t.name,class:"img-fluid object-cover"},null,8,R)]),i(F,{to:`/product/${t.product.id}`},{default:C(()=>[a(r(t.product.title),1)]),_:2},1032,["to"])]),e("td",A,r(s.$currency(t.product.price)),1),e("td",Q,r(t.qty)+" "+r(t.product.unit),1),e("td",Y,r(s.$currency(t.final_total)),1)]))),128))])]),e("div",$,[ee,e("p",null,r(s.$currency(s.carts.total)),1)]),e("div",se,[x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=t=>l.couponCode=t)},null,512),[[k,l.couponCode]]),e("button",{class:"btn btn-primary",type:"button",onClick:o[1]||(o[1]=(...t)=>m.useCoupon&&m.useCoupon(...t))}," 使用折價券 ")]),s.carts.total!==s.carts.final_total?(g(),b("div",te,[oe,e("p",null,r(s.$currency(s.carts.total-s.carts.final_total)),1)])):E("",!0),e("div",le,[ie,e("p",null,r(s.$currency(s.carts.final_total)),1)])]),e("div",ne,[i(j,{onSubmit:m.onSubmit},{default:C(({errors:t})=>[e("div",re,[ae,de,i(u,{id:"name",name:"姓名",type:"text",class:f(["form-control",{"is-invalid":t.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.user.name,"onUpdate:modelValue":o[2]||(o[2]=n=>l.user.name=n),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),i(p,{name:"姓名",class:"invalid-feedback"})]),e("div",ce,[me,i(u,{id:"email",name:"email",type:"email",class:f(["form-control",{"is-invalid":t.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.user.email,"onUpdate:modelValue":o[3]||(o[3]=n=>l.user.email=n)},null,8,["class","modelValue"]),i(p,{name:"email",class:"invalid-feedback"})]),e("div",ue,[pe,i(u,{id:"tel",name:"電話",type:"tel",class:f(["form-control",{"is-invalid":t.電話}]),placeholder:"請輸入電話",rules:m.isPhone,modelValue:l.user.tel,"onUpdate:modelValue":o[4]||(o[4]=n=>l.user.tel=n),modelModifiers:{trim:!0}},null,8,["class","rules","modelValue"]),i(p,{name:"電話",class:"invalid-feedback"})]),e("div",ge,[be,i(u,{id:"address",name:"地址",type:"text",class:f(["form-control",{"is-invalid":t.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:l.user.address,"onUpdate:modelValue":o[5]||(o[5]=n=>l.user.address=n),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),i(p,{name:"地址",class:"invalid-feedback"})]),e("div",fe,[_e,x(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"5","onUpdate:modelValue":o[6]||(o[6]=n=>l.message=n)},null,512),[[k,l.message]])]),he]),_:1},8,["onSubmit"])])])]),i(B,{active:s.isLoading,"onUpdate:active":o[7]||(o[7]=t=>s.isLoading=t)},null,8,["active"])])])}const we=L(J,[["render",ve]]);export{we as default};
